var _0x50a6d5=_0x5533;(function(_0x3eb37e,_0x15c8d3){var _0x116717=_0x5533,_0x5a73c9=_0x3eb37e();while(!![]){try{var _0x1328a0=-parseInt(_0x116717(0x101))/0x1*(parseInt(_0x116717(0x105))/0x2)+parseInt(_0x116717(0xad))/0x3+parseInt(_0x116717(0xda))/0x4+parseInt(_0x116717(0x100))/0x5*(-parseInt(_0x116717(0xd3))/0x6)+parseInt(_0x116717(0xe6))/0x7*(-parseInt(_0x116717(0xb5))/0x8)+-parseInt(_0x116717(0xfb))/0x9+parseInt(_0x116717(0x9c))/0xa*(parseInt(_0x116717(0xf4))/0xb);if(_0x1328a0===_0x15c8d3)break;else _0x5a73c9['push'](_0x5a73c9['shift']());}catch(_0x52f449){_0x5a73c9['push'](_0x5a73c9['shift']());}}}(_0xb7f0,0x2547a),proj4['defs'](_0x50a6d5(0xee),_0x50a6d5(0xcf)),window[_0x50a6d5(0xd8)]=L[_0x50a6d5(0xd8)](_0x50a6d5(0xd8),{'zoomControl':![],'doubleClickZoom':![]})[_0x50a6d5(0xa1)]([46.603354,1.888334],0x7),window[_0x50a6d5(0xe4)]=L['layerGroup']()[_0x50a6d5(0xf0)](map),window[_0x50a6d5(0xdf)]=L[_0x50a6d5(0xef)]()[_0x50a6d5(0xf0)](map),window[_0x50a6d5(0xa9)]=L[_0x50a6d5(0xef)]()['addTo'](map),window['ceLayer']=L[_0x50a6d5(0xef)]()[_0x50a6d5(0xf0)](map));var jsonData=null;window[_0x50a6d5(0xe3)]=[];var greenIcon=new L[(_0x50a6d5(0xdc))]({'iconUrl':'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png','shadowUrl':_0x50a6d5(0xd7),'iconSize':[0x19,0x29],'iconAnchor':[0xc,0x29],'popupAnchor':[0x1,-0x22],'shadowSize':[0x29,0x29]});function _0x5533(_0x253de9,_0x45a6b8){var _0xb7f032=_0xb7f0();return _0x5533=function(_0x5533fe,_0xad85f4){_0x5533fe=_0x5533fe-0x97;var _0x202839=_0xb7f032[_0x5533fe];return _0x202839;},_0x5533(_0x253de9,_0x45a6b8);}function _0xb7f0(){var _0x4b00a8=['icon','Map\x20is\x20not\x20defined.\x20Ensure\x20the\x20map\x20is\x20initialized\x20before\x20calling\x20\x27go()\x27.','setAttribute','Polygon','Le\x20point\x20choisi\x20n\x27est\x20pas\x20sur\x20un\x20BV\x20Topage','latitude','&copy;\x20<a\x20href=\x22https://www.openstreetmap.org/copyright\x22>OpenStreetMap</a>\x20contributors','data.csv','layers','createElement','Aucun\x20GeoJSON\x20disponible\x20à\x20télécharger.','target','then','booleanPointInPolygon','checked','Gp\x20is\x20not\x20defined.\x20Ensure\x20the\x20Geoportal\x20script\x20is\x20loaded.','markerbv','marker','Une\x20erreur\x20inconnue\x20s\x27est\x20produite.','length','download-csv-button','+proj=lcc\x20+lat_1=49\x20+lat_2=44\x20+lat_0=46.5\x20+lon_0=3\x20+x_0=700000\x20+y_0=6600000\x20+ellps=GRS80\x20+towgs84=0,0,0,0,0,0,0\x20+units=m\x20+no_defs','features','GeoJSON\x20avant\x20utilisation:','gml:Polygon','690918KalPKw','undefined',':</b>\x20','Erreur\x20lors\x20du\x20chargement\x20du\x20fichier\x20GeoJSON\x20:','https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png','map','getElementById','223372eBxVsq','openPopup','Icon','exterior','log','icpeLayer','properties','Feature','getElementsByTagNameNS','bbox','pollutionLayer','\x20mètres.','35zgLczr','load','application/xml','https://{s}.tile.osm.org/{z}/{x}/{y}.png','accuracy','textContent','<b>','removeLayer','EPSG:2154','layerGroup','addTo','keys','hasOwnProperty','data:text/json;charset=utf-8,','9188333kOnPQW','./bvtopo4326_8cvl.geojson','ORTHOIMAGERY.ORTHOPHOTOS','Vous\x20êtes\x20ici.\x20Précision:\x20','WMTS','forEach','round','2085201QjhGHg','posList','setLatLng','Failed\x20to\x20retrieve\x20configuration:','lat','10hCjcMD','138281zSwlvp','L\x27utilisateur\x20a\x20refusé\x20la\x20demande\x20de\x20géolocalisation.','stringify','geojsonLayer','4HQaMRM','join','urlbb4','push',',urn:ogc:def:crs:EPSG:','blue','openOn','lng','Point','geoportalLayer','intersectedPolygon','locate','code','yellow','body','coordinates','appendChild','GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2','essentiels','geometry','Services','remove','getElementsByTagName','<br>','Le\x20délai\x20d\x27attente\x20pour\x20obtenir\x20la\x20localisation\x20a\x20expiré.','addEventListener','<b>Propriétés\x20de\x20l\x27objet\x20:</b><br>','json','download-json-button','download','10RZWfEP','setContent','change','data.json','GML\x20Response:','setView','Erreur\x20lors\x20du\x20chargement\x20du\x20fichier\x20topage41.json:','click','Polygones\x20extraits:','https://unpkg.com/leaflet/dist/images/marker-icon.png','#8B4513','href','type','stepLayer','./topage41.json','control','Network\x20response\x20was\x20not\x20ok:\x20','320082DHQGcH','parse','La\x20position\x20est\x20indisponible.','error','latlng','MultiPolygon','point','geoJSON','170536HplPIe','Le\x20point\x20choisi\x20est\x20bien\x20sur\x20un\x20bassin\x20versant\x20topage','Calculated\x20BBOX:','text','catch'];_0xb7f0=function(){return _0x4b00a8;};return _0xb7f0();}window[_0x50a6d5(0x104)],fetch(_0x50a6d5(0xf5))[_0x50a6d5(0xc6)](_0x375a42=>_0x375a42[_0x50a6d5(0x99)]())[_0x50a6d5(0xc6)](_0x510dc3=>{var _0x302195=_0x50a6d5;window[_0x302195(0x104)]=L[_0x302195(0xb4)](_0x510dc3);})[_0x50a6d5(0xb9)](_0x1d689f=>console[_0x50a6d5(0xb0)](_0x50a6d5(0xd6),_0x1d689f)),window['lastGeoJSON4326']=null;var lastPollueurspoints=null,lastStepspoints=null,currentPolygon=null,markerbv=null;import{sendPostRequest}from'./postRequest.js';window['convertGeoJSON']=function(_0x5949ed,_0x5c3fa3,_0x1115e8){var _0x879335=_0x50a6d5,_0xdca6e0=JSON[_0x879335(0xae)](JSON[_0x879335(0x103)](_0x5949ed));return _0xdca6e0[_0x879335(0xd0)][_0x879335(0xf9)](_0x50bcdb=>{var _0x199ef7=_0x879335;(_0x50bcdb[_0x199ef7(0x118)][_0x199ef7(0xa8)]===_0x199ef7(0xbd)||_0x50bcdb[_0x199ef7(0x118)][_0x199ef7(0xa8)]===_0x199ef7(0xb2))&&(_0x50bcdb[_0x199ef7(0x118)][_0x199ef7(0x114)]=_0x50bcdb[_0x199ef7(0x118)][_0x199ef7(0x114)][_0x199ef7(0xd8)](_0x372c25=>{var _0x5c17b9=_0x199ef7;return _0x372c25[_0x5c17b9(0xd8)](_0x28c74d=>{return _0x28c74d['map'](_0xd8b1d6=>{var _0x541f05=proj4(_0x5c3fa3,_0x1115e8,_0xd8b1d6);return[_0x541f05[0x0],_0x541f05[0x1]];});});}));}),_0xdca6e0;};function calculateBBoxFromGeoJSON(_0x270d1c){var _0xe60f54=_0x50a6d5;const _0x439691=_0x270d1c[_0xe60f54(0x118)][_0xe60f54(0x114)][0x0];let _0x5f0522=_0x439691[0x0][0x0],_0x47fd46=_0x439691[0x0][0x0],_0x45802d=_0x439691[0x0][0x1],_0x276856=_0x439691[0x0][0x1];for(const _0x2829cf of _0x439691){const [_0x476ef4,_0x212188]=_0x2829cf;if(_0x476ef4<_0x5f0522)_0x5f0522=_0x476ef4;if(_0x476ef4>_0x47fd46)_0x47fd46=_0x476ef4;if(_0x212188<_0x45802d)_0x45802d=_0x212188;if(_0x212188>_0x276856)_0x276856=_0x212188;}return[_0x5f0522,_0x45802d,_0x47fd46,_0x276856];}function initializeMap(){var _0x99310f=_0x50a6d5;if(typeof Gp===_0x99310f(0xd4)){console[_0x99310f(0xb0)](_0x99310f(0xc9));return;}Gp[_0x99310f(0x119)]['getConfig']({'apiKey':_0x99310f(0x117),'onSuccess':function(_0x16b4d9){var _0x30632b=_0x99310f;console[_0x30632b(0xde)]('Configuration\x20retrieved\x20successfully:',_0x16b4d9);if(!map){console[_0x30632b(0xb0)](_0x30632b(0xbb));return;}_0x1b803b();},'onError':function(_0x39a09e){var _0xd6097f=_0x99310f;console['error'](_0xd6097f(0xfe),_0x39a09e);}});function _0x1b803b(){var _0x326d52=_0x99310f;enableGeolocation(map);var _0x346883=L['canvas']({'padding':0.5}),_0x48c6b1=L['geoportalLayer'][_0x326d52(0xf8)]({'layer':_0x326d52(0xf6)}),_0xfd0ac2=L[_0x326d52(0x10e)]['WMTS']({'layer':_0x326d52(0x116)},{'opacity':0.7})[_0x326d52(0xf0)](map),_0x35e734=L['tileLayer'](_0x326d52(0xe9),{'attribution':_0x326d52(0xc0)}),_0x5eef86={'OpenStreetMap':_0x35e734,'Orthophotos':_0x48c6b1,'Plan\x20IGN':_0xfd0ac2};L[_0x326d52(0xab)][_0x326d52(0xc2)](_0x5eef86)[_0x326d52(0xf0)](map);let _0x3fedec=null;const _0x117371=0x12c;map['on'](_0x326d52(0xa3),function(_0x189dc8){var _0xcd177b=_0x326d52;if(_0x3fedec!==null){clearTimeout(_0x3fedec),_0x3fedec=null,window['latlng']=_0x189dc8[_0xcd177b(0xb1)];var _0x289f39=[latlng[_0xcd177b(0x10c)],latlng[_0xcd177b(0xff)]];const _0x1378a7=turf[_0xcd177b(0xb3)]([latlng['lng'],latlng['lat']]),_0x1fe670=0.5,_0x58fd54=0.25,_0x5c839f=latlng[_0xcd177b(0x10c)]-_0x1fe670/0x2,_0x588b72=latlng[_0xcd177b(0x10c)]+_0x1fe670/0x2,_0x990e79=latlng[_0xcd177b(0xff)]-_0x58fd54/0x2,_0x38ab7f=latlng[_0xcd177b(0xff)]+_0x58fd54/0x2,_0x456ff9=[_0x5c839f,_0x990e79,_0x588b72,_0x38ab7f];window['urlbb4']='https://services.sandre.eaufrance.fr/geo/sandre?language=fre&SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=sa:BassinVersantTopographique_FXX_Topage2024&SRSNAME=urn:ogc:def:crs:EPSG::4326&BBOX='+_0x456ff9[_0xcd177b(0x106)](',')+_0xcd177b(0x109),console[_0xcd177b(0xde)](_0xcd177b(0x107),urlbb4),fetch(urlbb4)[_0xcd177b(0xc6)](_0x409456=>{var _0xafe7f6=_0xcd177b;if(!_0x409456['ok'])throw new Error(_0xafe7f6(0xac)+_0x409456['statusText']);return _0x409456[_0xafe7f6(0xb8)]();})[_0xcd177b(0xc6)](_0x3cc828=>{var _0x368287=_0xcd177b;console[_0x368287(0xde)](_0x368287(0xa0),_0x3cc828);const _0x448711=new DOMParser(),_0x75a73f=_0x448711['parseFromString'](_0x3cc828,_0x368287(0xe8)),_0x35d5c4=_0x75a73f[_0x368287(0x11b)](_0x368287(0xd2));console['log'](_0x368287(0xa4),_0x35d5c4[_0x368287(0xcd)]);const _0x901b89=[];for(let _0x50a57c=0x0;_0x50a57c<_0x35d5c4[_0x368287(0xcd)];_0x50a57c++){const _0x453f23=_0x35d5c4[_0x50a57c][_0x368287(0xe2)]('*',_0x368287(0xdd))[0x0];if(!_0x453f23)continue;const _0x313872=_0x453f23['getElementsByTagNameNS']('*','LinearRing')[0x0];if(!_0x313872)continue;const _0x277062=_0x313872[_0x368287(0xe2)]('*',_0x368287(0xfc))[0x0];if(!_0x277062)continue;const _0x177353=_0x277062[_0x368287(0xeb)]['trim']()['split']('\x20'),_0x5933e9=[];for(let _0x36d2b3=0x0;_0x36d2b3<_0x177353[_0x368287(0xcd)];_0x36d2b3+=0x2){const _0x2948d2=parseFloat(_0x177353[_0x36d2b3+0x1]),_0x56811d=parseFloat(_0x177353[_0x36d2b3]);!isNaN(_0x2948d2)&&!isNaN(_0x56811d)&&_0x5933e9[_0x368287(0x108)]([_0x2948d2,_0x56811d]);}_0x5933e9[_0x368287(0xcd)]>0x0&&_0x901b89[_0x368287(0x108)]({'type':_0x368287(0xe1),'geometry':{'type':_0x368287(0xbd),'coordinates':[_0x5933e9]},'properties':{}});}const _0x31d074={'type':'FeatureCollection','features':_0x901b89};console[_0x368287(0xde)](_0x368287(0xd1),JSON[_0x368287(0x103)](_0x31d074,null,0x2));_0x31d074[_0x368287(0xd0)][_0x368287(0xcd)]>0x0&&L[_0x368287(0xb4)](_0x31d074,{'style':{'color':_0x368287(0x10a),'fillColor':_0x368287(0x10a),'fillOpacity':0.1,'weight':0.5}})[_0x368287(0xf0)](map);window[_0x368287(0x10f)]=null;const _0x2571fc=turf[_0x368287(0xb3)]([latlng[_0x368287(0x10c)],latlng[_0x368287(0xff)]]);for(const _0x3d3357 of _0x31d074[_0x368287(0xd0)]){const _0x3add21=_0x3d3357[_0x368287(0x118)][_0x368287(0x114)];if(_0x3d3357[_0x368287(0x118)][_0x368287(0xa8)]===_0x368287(0xbd)){const _0x48cbe0=turf['polygon'](_0x3add21);if(turf[_0x368287(0xc7)](_0x2571fc,_0x48cbe0)){window[_0x368287(0x10f)]=_0x3d3357;break;}}}window[_0x368287(0x10f)]?(L[_0x368287(0xb4)](window[_0x368287(0x10f)],{'style':{'color':_0x368287(0x112),'fillColor':'yellow','fillOpacity':0.5,'weight':0x2}})['addTo'](map),window[_0x368287(0xe3)]=calculateBBoxFromGeoJSON(window['intersectedPolygon']),console[_0x368287(0xde)](_0x368287(0xb7),window['bbox']),alert(_0x368287(0xb6))):alert(_0x368287(0xbe)),markerbv&&map[_0x368287(0xed)](markerbv),window[_0x368287(0xca)]=L[_0x368287(0xcb)]([latlng[_0x368287(0xff)],latlng[_0x368287(0x10c)]],{'icon':greenIcon})[_0x368287(0xf0)](map);})[_0xcd177b(0xb9)](_0x3d347f=>{console['error']('Problème\x20avec\x20la\x20requête\x20fetch:',_0x3d347f);});}else _0x3fedec=setTimeout(function(){var _0x204a5b=_0xcd177b;L['popup']()['setLatLng'](_0x189dc8['latlng'])[_0x204a5b(0x9d)]('Information\x20sur\x20le\x20polygone')[_0x204a5b(0x10b)](map),_0x3fedec=null;},_0x117371);}),document[_0x326d52(0xd9)]('download-button')['addEventListener'](_0x326d52(0xa3),function(){var _0x20da60=_0x326d52;if(lastGeoJSON4326){var _0xfd569f=_0x20da60(0xf3)+encodeURIComponent(JSON[_0x20da60(0x103)](lastGeoJSON4326)),_0x2a5edd=document['createElement']('a');_0x2a5edd[_0x20da60(0xbc)]('href',_0xfd569f),_0x2a5edd[_0x20da60(0xbc)](_0x20da60(0x9b),'bassin_versant_EPSG4326.geojson'),document['body'][_0x20da60(0x115)](_0x2a5edd),_0x2a5edd[_0x20da60(0xa3)](),_0x2a5edd[_0x20da60(0x11a)]();}else alert(_0x20da60(0xc4));});let _0x341480=null;document[_0x326d52(0xd9)]('checkbox-41')[_0x326d52(0x97)](_0x326d52(0x9e),function(_0x451ce6){var _0x28a679=_0x326d52;_0x451ce6[_0x28a679(0xc5)][_0x28a679(0xc8)]?fetch(_0x28a679(0xaa))[_0x28a679(0xc6)](_0xd59f37=>_0xd59f37[_0x28a679(0x99)]())[_0x28a679(0xc6)](_0x46cbc9=>{var _0x3af2aa=_0x28a679;_0x341480=L[_0x3af2aa(0xb4)](_0x46cbc9,{'style':function(_0x4dc580){var _0x3bdf52=_0x3af2aa;return{'color':_0x3bdf52(0xa6)};}})[_0x3af2aa(0xf0)](map);})[_0x28a679(0xb9)](_0x3d4f71=>console[_0x28a679(0xb0)](_0x28a679(0xa2),_0x3d4f71)):_0x341480&&map[_0x28a679(0xed)](_0x341480);}),document['getElementById'](_0x326d52(0x9a))[_0x326d52(0x97)](_0x326d52(0xa3),function(){var _0x45f3f7=_0x326d52;if(jsonData){var _0x3216ba=_0x45f3f7(0xf3)+encodeURIComponent(JSON[_0x45f3f7(0x103)](jsonData)),_0x5636d0=document[_0x45f3f7(0xc3)]('a');_0x5636d0[_0x45f3f7(0xbc)](_0x45f3f7(0xa7),_0x3216ba),_0x5636d0[_0x45f3f7(0xbc)](_0x45f3f7(0x9b),_0x45f3f7(0x9f)),document['body'][_0x45f3f7(0x115)](_0x5636d0),_0x5636d0[_0x45f3f7(0xa3)](),_0x5636d0[_0x45f3f7(0x11a)]();}else alert('Aucune\x20donnée\x20JSON\x20disponible\x20pour\x20le\x20téléchargement.');}),document[_0x326d52(0xd9)](_0x326d52(0xce))[_0x326d52(0x97)](_0x326d52(0xa3),function(){var _0x500375=_0x326d52;if(jsonData){var _0x3fe26a='data:text/csv;charset=utf-8,',_0x5af2bc=[_0x500375(0xbf),'longitude',...Object[_0x500375(0xf1)](jsonData['features'][0x0][_0x500375(0xe0)])];_0x3fe26a+=_0x5af2bc['join'](',')+'\x0a',jsonData[_0x500375(0xd0)][_0x500375(0xf9)](_0x1aa007=>{var _0x232e3a=_0x500375;if(_0x1aa007[_0x232e3a(0x118)][_0x232e3a(0xa8)]===_0x232e3a(0x10d)){var _0x27b8c8=_0x1aa007[_0x232e3a(0x118)][_0x232e3a(0x114)],_0x145ea0=Object['values'](_0x1aa007[_0x232e3a(0xe0)])[_0x232e3a(0xd8)](_0x3f8717=>'\x22'+_0x3f8717+'\x22');_0x3fe26a+=[_0x27b8c8[0x1],_0x27b8c8[0x0],..._0x145ea0][_0x232e3a(0x106)](',')+'\x0a';}});var _0x4486e9=encodeURI(_0x3fe26a),_0xcfe806=document[_0x500375(0xc3)]('a');_0xcfe806[_0x500375(0xbc)](_0x500375(0xa7),_0x4486e9),_0xcfe806[_0x500375(0xbc)]('download',_0x500375(0xc1)),document[_0x500375(0x113)]['appendChild'](_0xcfe806),_0xcfe806[_0x500375(0xa3)](),_0xcfe806[_0x500375(0x11a)]();}else alert('Aucune\x20donnée\x20CSV\x20disponible\x20pour\x20le\x20téléchargement.');});}}window[_0x50a6d5(0x97)](_0x50a6d5(0xe7),initializeMap);function enableGeolocation(_0x1b6264){var _0x2e7874=_0x50a6d5,_0x70c974=null;function _0x147a8a(_0x2a6fe0){var _0x4fed90=_0x5533,_0x8ff03c=_0x2a6fe0[_0x4fed90(0xea)]/0x2;!_0x70c974&&(_0x70c974=L[_0x4fed90(0xcb)](_0x2a6fe0[_0x4fed90(0xb1)],{'icon':L[_0x4fed90(0xba)]({'iconUrl':_0x4fed90(0xa5),'iconSize':[0x19,0x29],'iconAnchor':[0xc,0x29],'popupAnchor':[0x1,-0x22]})})[_0x4fed90(0xf0)](_0x1b6264)),_0x70c974[_0x4fed90(0xfd)](_0x2a6fe0[_0x4fed90(0xb1)])['setPopupContent'](_0x4fed90(0xf7)+Math[_0x4fed90(0xfa)](_0x8ff03c)+_0x4fed90(0xe5))[_0x4fed90(0xdb)](),_0x1b6264[_0x4fed90(0xa1)](_0x2a6fe0['latlng'],0xd);}function _0x265b12(_0x4bccf7){var _0x198f15=_0x5533;switch(_0x4bccf7[_0x198f15(0x111)]){case 0x1:alert(_0x198f15(0x102));break;case 0x2:alert(_0x198f15(0xaf));break;case 0x3:alert(_0x198f15(0x11d));break;default:alert(_0x198f15(0xcc));}}var _0x5038e3={'setView':!![],'maxZoom':0x10,'enableHighAccuracy':!![],'timeout':0x2710,'maximumAge':0x0};_0x1b6264[_0x2e7874(0x110)](_0x5038e3),_0x1b6264['on']('locationfound',_0x147a8a),_0x1b6264['on']('locationerror',_0x265b12);}function createPopupContent(_0x12d2f0){var _0x31c7c7=_0x50a6d5,_0x5e8e68=_0x31c7c7(0x98);for(var _0x46c9d1 in _0x12d2f0){_0x12d2f0[_0x31c7c7(0xf2)](_0x46c9d1)&&(_0x5e8e68+=_0x31c7c7(0xec)+_0x46c9d1+_0x31c7c7(0xd5)+_0x12d2f0[_0x46c9d1]+_0x31c7c7(0x11c));}return _0x5e8e68;}
